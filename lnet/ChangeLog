2005-02-04  Eric Barton  <eeb@bartonsoftware.com>

	* Landed portals:b_port_step as follows...

	  - removed CFS_DECL_SPIN* 
	    just use 'spinlock_t' and initialise with spin_lock_init()

	  - removed CFS_DECL_MUTEX*
	    just use 'struct semaphore' and initialise with init_mutex()

	  - removed CFS_DECL_RWSEM*
	    just use 'struct rw_semaphore' and initialise with init_rwsem()

	  - renamed cfs_sleep_chan -> cfs_waitq
	            cfs_sleep_link -> cfs_waitlink

          - fixed race in linux version of arch-independent socknal
  	    (the ENOMEM/EAGAIN decision).

	  - Didn't fix problems in Darwin version of arch-independent socknal
 	    (resetting socket callbacks, eager ack hack, ENOMEM/EAGAIN decision)

	  - removed libcfs types from non-socknal header files (only some types
	    in the header files had been changed; the .c files hadn't been
	    updated at all).
