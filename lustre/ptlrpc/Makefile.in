MODULES := ptlrpc
ifeq ($(PATCHLEVEL),6)
LDLM := @top_srcdir@/ldlm/
else
LDLM :=
endif
ptlrpc-objs := $(LDLM)l_lock.o $(LDLM)ldlm_lock.o 
ptlrpc-objs += $(LDLM)ldlm_resource.o $(LDLM)ldlm_lib.o
ptlrpc-objs += $(LDLM)ldlm_plain.o $(LDLM)ldlm_extent.o
ptlrpc-objs += $(LDLM)ldlm_request.o $(LDLM)ldlm_lockd.o
ptlrpc-objs += $(LDLM)ldlm_flock.o $(LDLM)ldlm_inodebits.o
ptlrpc-objs += client.o recover.o connection.o niobuf.o pack_generic.o
ptlrpc-objs += events.o ptlrpc_module.o service.o pinger.o recov_thread.o
ptlrpc-objs += llog_net.o llog_client.o llog_server.o import.o ptlrpcd.o
ptlrpc-objs += pers.o lproc_ptlrpc.o

default: all

ldlm_%.c: @LUSTRE@/ldlm/ldlm_%.c
	ln -sf $< $@

l_lock.c: @LUSTRE@/ldlm/l_lock.c
	ln -sf $< $@

EXTRA_PRE_CFLAGS := -I@LUSTRE@/ldlm

@INCLUDE_RULES@
