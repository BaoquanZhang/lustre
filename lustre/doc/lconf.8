.TH lconf 1 "2003 Oct 8" Lustre "configuration utilities"
.SH NAME
lconf \- Lustre filesystem configuration utility
.SH SYNOPSIS
.br
.B lconf
[--node <node_name>] [-d,--cleanup] [--noexec] [--gdb] [--nosetup] [--nomod] [-n,--noexec] [-v,--verbose] [-h,--help] <XML-config file>
[options] --add <objecttype> [args]
.br
.SH DESCRIPTION
.B lconf
, when invoked configures a node following directives in the <XML-config-file>. There will be single configuration file for all the nodes in a single cluster. This file should be distributed to all the nodes in the cluster or kept in a location accessible to all the nodes. One option is to store the cluster configuration information in LDAP format on an LDAP server that can be reached from all the cluster nodes.
.PP
The arguments that can be used for lconf are:
.PP
.TP
--config <arg> 
Cluster configuration name used for LDAP query
.TP
--d|--cleanup 
Unconfigure a node. The same config and --node argument used for configuration needs to be used for cleanup as well. This will attempt to undo all of the configuration steps done by lconf, including unloading the kernel modules.
.TP
--dump <file> 
Dump the kernel debug log to the specified file before portals is unloaded during cleanup.
.TP
--dump_path <arg> 
Path to save debug dumps. Default is /tmp/lustre_log
.TP
--failover 
Used to shutdown without saving state. Default is 0. This will allow the node to give up service to another node for failover purposes. This will not be a clean shutdown.
.TP
--force 
Forced unmounting and/or obd detach during cleanup. Default is 0. 
.TP
--gdb 
Causes lconf to print a message and pause for 5 seconds after creating a gdb module script and before doing any Lustre configuration (the gdb module script is always created, however).
.TP
--gdb_script <arg> 
Full name of gdb debug script. Default is /tmp/ogdb.
.TP
--group <arg> 
The group of devices to cleanup/configure.
.TP
-h,--help 
Print help.
.TP
--inactive <UUID> 
The UUID of the service to be ignored by a client mounting Lustre. Allows the client to mount in the presence of some inactive services. (currently OST only). Multiple UUIDs can be specified by repeating the option. 
.TP
--lctl-dump <arg> 
Dump all ioctls to the specified file
.TP
--ldapurl <arg> 
LDAP server URL 
.TP
--lustre_upcall <path> 
Set the location of the Lustre upcall scripts used by the client for recovery
.TP
--lustre=src_dir 
Specify the base directory for Lustre sources, this parameter will cause lconf to load the lustre modules from this soure tree.
.TP
--mds_ost_conn 
Open connections to OSTs on MDS.
.TP
--maxlevel <level> 
Perform configuration of devices and services up to level given. level can take the values net, dev, svc, fs. When used in conjunction with cleanup, services are torn down up to a certain level. Default is 100.
.TP
--minlevel <level> 
Specify the minimum level of services to configure/cleanup. Default is 0.
.TP
--node node_name 
Specify a specific node to configure. By default, lconf will search for nodes with the local hostname and 'localhost'. When --node is used, only node_name is searched for. If a matching node is not found in the config, then lconf exits with an error.
.TP
--noexec,-n 
Print, but don't execute, the steps lconf will perform. This is useful for debugging a configuration, and when used with --node, can be run on any host.
.TP
--nomod 
Only setup devices and services, do not load modules.
.TP
--nosetup 
Only load modules, do not configure devices or services.
.TP
--portals_upcall <path> 
Specify the location of the Portals upcall scripts used by the client for recovery
.TP
--ptldebug debug-level 
This options can be used to set the required debug level.
.TP
--recover <arg> 
Recover a device.
.TP
--reformat 
Reformat all the devices. This is essential on the first time the file system is brought up.
.TP
--select <arg> 
Select a particular node for a service 
.TP
--subsystem <arg> 
Set the portals debug subsystem.
.TP
--timeout <arg> 
Set the recovery timeout period.
.TP
--upcall <path> 
Set the location of both Lustre and Portals upcall scripts used by the client for recovery
.TP
--verbose,-v 
Be verbose and show actions while going along.
.TP
--write_conf 
Save all client configuration information on the MDS
.SH EXAMPLES
.TP
.B lconf --node client config.xml
This invokes lconf on the client node.
.TP
.B lconf --ptldebug "~(portals | malloc | trace)"
Used to set the required debug levels (all but these).
.TP
.B lconf --ptldebug "ldlm|ha"
Used to turn-on specific debug types.
.TP
.B lconf --inactive OST_ost1_UUID --inactive OST_ost2_UUID config.xml
A subset of failed OSTs can be ignored during Lustre mount on the clients by using this option. Here OST1 and OST2 have failed and need to be ignored.
.SH BUGS
None are known.
