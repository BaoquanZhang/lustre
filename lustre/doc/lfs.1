.TH lfs 1 "2003 Oct 29" Lustre "configuration utilities"
.SH NAME
lfs \- Lustre utility to create a file with specific striping pattern, find the striping pattern of exiting files
.SH SYNOPSIS
.br
.B lfs
.br
.B lfs find [--atime|-A N] [--mtime|-M N] [--ctime|-C N] [--maxdepth|-D N]
         \fB[--print0|-P] [--print|-p] [--obd|-O <uuid>] <dir/file>\fR
.br
.B lfs find [--quiet|-q] [--verbose|-v] [--recursive|-r] <dir|file>
.br
.B lfs getstripe [--obd|-O <uuid>] [--quiet|-q] [--verbose|-v] 
              \fB[--recursive|-r] <dir/file>\fR
.br
.B lfs setstripe <filename|dirname> <stripe-size> <start-ost> <stripe-cnt> 
.br
.B lfs setstripe <filename|dirname> [--size|-s stripe-size] [--index|-i start-ost] [--count|-c stripe-cnt]
.br
.B lfs setstripe -d <dirname>
.br
.B lfs quotachown [-i] <filesystem>
.br
.B lfs quotacheck [-ug] <filesystem>
.br
.B lfs quotaon [-ugf] <filesystem>
.br
.B lfs quotaoff [-ug] <filesystem>
.br
.B lfs setquota [-u|-g] <name> <block-softlimit> <block-hardlimit> 
             \fB<inode-softlimit> <inode-hardlimit> <filesystem>\fR
.br
.B lfs quota [-o obd_uuid] [-u|-g] <name> <filesystem>
.br
.B lfs check <mds| osts| servers>
.br
.B lfs df [-i] [-h] [path]
.SH DESCRIPTION
.B lfs
can be used to create a new file with a specific striping pattern, determine the default striping pattern, gather the extended attributes (object numbers and 
location) for a specific file. It can be invoked interactively without any 
arguments or in a non-interactive mode with one of the arguements supported. 
.SH OPTIONS
The various options supported by lctl are listed and explained below:
.TP
.B setstripe 
To create a new file with a specific striping pattern
.TP
.B find 
To search the directory tree rooted at the given dir/file name for the files that match the given parameters: \fB--atime\fR (file was last accessed N*24 hours ago), \fB--ctime\fR (file's status was last changed N*24 hours ago), \fB--mtime\fR (file's data was last modified N*24 hours ago), \fB--obd\fR (file has an object on a specific OST). The option \fB--maxdepth\fR allows find to decend at most N levels of directory tree. The options \fB--print\fR and \fB--print0\fR print full file name, followed by a newline and null character correspondingly.  Using one of these options works in the new (filename only) mode.
.TP
.B find
To list the striping info for a given filename or files in a directory or recursively for all files in a directory tree use one of the following options: \fB[--quiet|-q] [--verbose|-v] [--recursive|-r]\fR. If one of these options is given find works in old (obsolete, please use getstripe instead) filename and striping mode.
.TP
.B getstripe 
To list the striping info for given filename or files in a directory or recursively for all files in a directory tree. It can also be used to list the files that have objects on a specific OST.
.TP
.B quotachown
To change files' owner and group on OSTs of the specified filesystem
.TP
.B quotacheck
To scan the specified filesystem for disk usage, and create or update quota files
.TP
.B quotaon
To turn filesystem quotas on
.TP
.B quotaoff
To turn filesystem quotas off
.TP
.B setquota
To set filesystem quotas
.TP
.B quota
To display disk usage and limits
.TP
.B check 
Display the status of MDS or OSTs (as specified in the command) or all the servers (MDS and OSTs)
.TP
.B osts 
List all the OSTs for the filesystem
.TP
.B df
Report filesystem disk space usage or inodes usage of each MDT/OST.
.TP
.B help 
Provides brief help on the various arguments
.TP
.B exit/quit 
Quit the interactive lfs session
.SH EXAMPLES
.TP
.B $ lfs setstripe /mnt/lustre/file1 131072 -1 2
This creats a file striped on two OSTs with 128kB on each stripe.
.TP
.B $ lfs setstripe -d /mnt/lustre/dir
This deletes a default stripe pattern on dir. New files will use the default striping pattern created therein.
.TP
.B $ lfs find /mnt/lustre/file1
Lists the object allocation of a given file
.TP
.B $ lfs find /mnt/lustre/
Lists the object allocationss of all files in a given directory
.TP
.B $ lfs find -r /mnt/lustre/
Recursively list the objects of all files in a given directory tree
.TP
.B $ lfs find -r --obd OST2-UUID /mnt/lustre/
Recursively list all files in a given directory that have objects on OST2-UUID.
.TP
.B $ lfs quotachown -i /mnt/lustre
Change file owner and group
.TP
.B $ lfs quotacheck -ug /mnt/lustre
Quotacheck for user and group
.TP
.B $ lfs quotaon -ug /mnt/lustre
Turn quotas of user and group on
.TP
.B $ lfs quotaoff -ug /mnt/lustre
Turn quotas of user and group off
.TP
.B $ lfs setquota -u bob 0 1000000 0 10000 /mnt/lustre
Set quotas of user `bob': 1GB block quota and 10,000 file quota
.TP
.B $ lfs quota -u bob /mnt/lustre
List quotas of user `bob'
.TP
.B $ lfs check servers 
Check the status of all servers (MDT, OST)
.TP
.B $ lfs osts
List all the OSTs
.TP
.B $ lfs df -i 
Lists inode consumpton per OST and MDT
.SH BUGS
None are known.
