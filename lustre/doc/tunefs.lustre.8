.\" -*- nroff -*-
.\" Copyright 2006 by ClusterFileSystems.  All Rights Reserved.
.\" This file may be copied under the terms of the GNU Public License.
.\"
.TH tunefs.lustre 8 "2006 Jun 15" Lustre "configuration utilities"
.SH NAME
tunefs.lustre \- modify the Lustre configuration information on a disk
.SH SYNOPSIS
.br
.B tunefs.lustre
[options] 
.I device
.br
.SH DESCRIPTION
.B tunefs.lustre
is used to modify the configuration information on a Lustre target
disk. This includes upgrading old (pre-Lustre 1.6) disks.  This does not
reformat the disk or erase the target information, but modifying the
configuration information can result in an unusable filesystem.  You have
been warned.
.br
Changes made here will affect a filesystem only when the target is next
mounted.

.SH OPTIONS
.TP
.BI \--erase-params
Remove all previous parameter info
.TP
.BI \--failnode= nid,...  
Set the NID(s) of a failover partner. This option can be repeated as desired.
.TP
.BI \--fsname= filesystem_name  
The Lustre filesystem this service will be part of.  Default is 'lustre'
.TP
.BI \--index= index
Force a particular OST or MDT index 
.TP
.BI \--mountfsoptions= opts
Set permanent mount options, equivalent to setting in /etc/fstab
.TP
.BI \--mgs
add a configuration management service to this target
.TP
.BI \--mgsnode= nid,...  
Set the NID(s) of the MGS node, required for all targets other than the MGS.
.TP
.BI \--noformat 
Only print what would be done; does not affect the disk
.TP
.BI \--nomgs
remove a configuration management service to this target
.TP
.BI \--param " key=value"
Set permanent parameter 
.I key 
to value 
.I value.
This option can be repeated as desired.
.TP
.BI \--quiet
Print less information.
.TP
.BI \--reformat 
Reformat an existing Lustre disk
.TP
.BI \--verbose
Print more information.
.TP
.BI \--writeconf
Erase all config logs for the filesystem that this target is part of.

.SH EXAMPLES
.TP
.B tunefs.lustre --fsname=testfs --mdt --mgs /dev/sda1
Combined MGS and MDT for filesystem 'testfs' on node e.g. cfs21
.TP
.B tunefs.lustre --fsname=testfs --ost --mgsnode=cfs21@tcp0 /dev/sdb
OST for filesystem 'testfs' on any node using the above MGS.
.TP
.B tunefs.lustre --mgs /dev/sda1
Standalone MGS on e.g. node cfs22
.TP
.B tunefs.lustre --fsname=myfs1 --mdt --mgsnode=cfs22@tcp0 /dev/sda2
MDT for filesystem 'myfs1' on any node, using the above MGS

.SH BUGS
Please report all bugs to ClusterFileSystems, support@clusterfs.com
.SH AVAILABILITY
.B tunefs.lustre
is part of the 
.BR Lustre (7) 
filesystem package and is available from CFS
.br
http://clusterfs.com
.SH SEE ALSO
.BR Lustre (7),
.BR mkfs.lustre (8),
.BR mount.lustre (8),
.BR lctl (8),
.BR lfs (1)
