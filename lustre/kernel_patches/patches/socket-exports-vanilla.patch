 include/linux/socket.h |    4 ++++
 net/netsyms.c          |    2 ++
 net/socket.c           |    2 +-
 3 files changed, 7 insertions(+), 1 deletion(-)

--- linux-2.4.20-l18/include/linux/socket.h~socket-exports-vanilla	Fri Aug 22 15:43:58 2003
+++ linux-2.4.20-l18-phil/include/linux/socket.h	Fri Aug 22 16:26:37 2003
@@ -260,6 +260,10 @@ extern void memcpy_tokerneliovec(struct 
 extern int move_addr_to_user(void *kaddr, int klen, void *uaddr, int *ulen);
 extern int move_addr_to_kernel(void *uaddr, int ulen, void *kaddr);
 extern int put_cmsg(struct msghdr*, int level, int type, int len, void *data);
+struct socket;
+extern int sock_map_fd(struct socket *sock);
+extern struct socket *sockfd_lookup(int fd, int *err);
+
 #endif
 #endif /* not kernel and not glibc */
 #endif /* _LINUX_SOCKET_H */
--- linux-2.4.20-l18/net/netsyms.c~socket-exports-vanilla	Fri Aug 22 15:43:58 2003
+++ linux-2.4.20-l18-phil/net/netsyms.c	Fri Aug 22 16:25:04 2003
@@ -159,6 +159,8 @@ EXPORT_SYMBOL(datagram_poll);
 EXPORT_SYMBOL(put_cmsg);
 EXPORT_SYMBOL(sock_kmalloc);
 EXPORT_SYMBOL(sock_kfree_s);
+EXPORT_SYMBOL(sockfd_lookup);
+EXPORT_SYMBOL(sock_map_fd);
 
 #ifdef CONFIG_FILTER
 EXPORT_SYMBOL(sk_run_filter);
--- linux-2.4.20-l18/net/socket.c~socket-exports-vanilla	Fri Aug 22 15:43:58 2003
+++ linux-2.4.20-l18-phil/net/socket.c	Fri Aug 22 16:25:04 2003
@@ -325,7 +325,7 @@ static struct dentry_operations sockfs_d
  *	but we take care of internal coherence yet.
  */
 
-static int sock_map_fd(struct socket *sock)
+int sock_map_fd(struct socket *sock)
 {
 	int fd;
 	struct qstr this;

_
