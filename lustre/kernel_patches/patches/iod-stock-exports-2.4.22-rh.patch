 fs/Makefile     |    2 +-
 fs/inode.c      |    4 +++-
 mm/page_alloc.c |    1 +
 3 files changed, 5 insertions(+), 2 deletions(-)

--- linux-2.4.22-ac1/fs/inode.c~iod-stock-exports-2.4.22-rh	2003-09-25 14:45:32.000000000 +0400
+++ linux-2.4.22-ac1-alexey/fs/inode.c	2003-09-25 14:49:41.000000000 +0400
@@ -5,6 +5,7 @@
  */
 
 #include <linux/config.h>
+#include <linux/module.h>
 #include <linux/fs.h>
 #include <linux/string.h>
 #include <linux/mm.h>
@@ -68,7 +69,8 @@ static LIST_HEAD(anon_hash_chain); /* fo
  * NOTE! You also have to own the lock if you change
  * the i_state of an inode while it is in use..
  */
-static spinlock_t inode_lock = SPIN_LOCK_UNLOCKED;
+spinlock_t inode_lock = SPIN_LOCK_UNLOCKED;
+EXPORT_SYMBOL(inode_lock);
 
 /*
  * Statistics gathering..
--- linux-2.4.22-ac1/fs/Makefile~iod-stock-exports-2.4.22-rh	2003-09-25 14:16:28.000000000 +0400
+++ linux-2.4.22-ac1-alexey/fs/Makefile	2003-09-25 14:50:00.000000000 +0400
@@ -7,7 +7,7 @@
 
 O_TARGET := fs.o
 
-export-objs :=	filesystems.o open.o dcache.o buffer.o dquot.o dcookies.o
+export-objs :=	filesystems.o open.o dcache.o buffer.o dquot.o dcookies.o inode.o
 mod-subdirs :=	nls xfs
 
 obj-y :=	open.o read_write.o devices.o file_table.o buffer.o \
--- linux-2.4.22-ac1/mm/page_alloc.c~iod-stock-exports-2.4.22-rh	2003-09-25 14:16:28.000000000 +0400
+++ linux-2.4.22-ac1-alexey/mm/page_alloc.c	2003-09-25 14:49:41.000000000 +0400
@@ -28,6 +28,7 @@ int nr_inactive_pages;
 LIST_HEAD(inactive_list);
 LIST_HEAD(active_list);
 pg_data_t *pgdat_list;
+EXPORT_SYMBOL(pgdat_list);
 
 /*
  *

_
