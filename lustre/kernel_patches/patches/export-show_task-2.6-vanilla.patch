Index: linux-2.6.10/kernel/sched.c
===================================================================
--- linux-2.6.10.orig/kernel/sched.c	2005-05-31 23:40:49.000000000 +0400
+++ linux-2.6.10/kernel/sched.c	2005-06-20 16:50:04.000000000 +0400
@@ -3546,7 +3546,7 @@
 	return list_entry(p->sibling.next,struct task_struct,sibling);
 }
 
-static void show_task(task_t * p)
+void show_task(task_t * p)
 {
 	task_t *relative;
 	unsigned state;
@@ -3596,9 +3596,10 @@
 	else
 		printk(" (NOTLB)\n");
 
-	if (state != TASK_RUNNING)
+	if (state != TASK_RUNNING || p == current)
 		show_stack(p, NULL);
 }
+EXPORT_SYMBOL(show_task);
 
 void show_state(void)
 {
