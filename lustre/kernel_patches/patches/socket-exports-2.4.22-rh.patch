 include/linux/socket.h |    4 ++++
 net/netsyms.c          |    1 +
 net/socket.c           |    2 +-
 3 files changed, 6 insertions(+), 1 deletion(-)

--- linux-2.4.22-ac1/include/linux/socket.h~socket-exports-2.4.22-rh	2003-06-13 18:51:39.000000000 +0400
+++ linux-2.4.22-ac1-alexey/include/linux/socket.h	2003-09-26 00:49:43.000000000 +0400
@@ -275,6 +275,10 @@ extern void memcpy_tokerneliovec(struct 
 extern int move_addr_to_user(void *kaddr, int klen, void *uaddr, int *ulen);
 extern int move_addr_to_kernel(void *uaddr, int ulen, void *kaddr);
 extern int put_cmsg(struct msghdr*, int level, int type, int len, void *data);
+struct socket;
+extern int sock_map_fd(struct socket *sock);
+extern struct socket *sockfd_lookup(int fd, int *err);
+
 #endif
 #endif /* not kernel and not glibc */
 #endif /* _LINUX_SOCKET_H */
--- linux-2.4.22-ac1/net/netsyms.c~socket-exports-2.4.22-rh	2003-09-26 00:49:19.000000000 +0400
+++ linux-2.4.22-ac1-alexey/net/netsyms.c	2003-09-26 00:50:20.000000000 +0400
@@ -163,6 +163,7 @@ EXPORT_SYMBOL(put_cmsg);
 EXPORT_SYMBOL(sock_kmalloc);
 EXPORT_SYMBOL(sock_kfree_s);
 EXPORT_SYMBOL(sockfd_lookup);
+EXPORT_SYMBOL(sock_map_fd);
 
 #ifdef CONFIG_FILTER
 EXPORT_SYMBOL(sk_run_filter);
--- linux-2.4.22-ac1/net/socket.c~socket-exports-2.4.22-rh	2003-08-25 15:44:44.000000000 +0400
+++ linux-2.4.22-ac1-alexey/net/socket.c	2003-09-26 00:49:43.000000000 +0400
@@ -325,7 +325,7 @@ static struct dentry_operations sockfs_d
  *	but we take care of internal coherence yet.
  */
 
-static int sock_map_fd(struct socket *sock)
+int sock_map_fd(struct socket *sock)
 {
 	int fd;
 	struct qstr this;

_
