 fs/ext3/Makefile   |    2 ++
 fs/ext3/super.c    |    2 +-
 include/linux/fs.h |    1 +
 kernel/ksyms.c     |    4 ++++
 4 files changed, 8 insertions(+), 1 deletion(-)

Index: linux-2.4.19.SuSE/fs/ext3/Makefile
===================================================================
--- linux-2.4.19.SuSE.orig/fs/ext3/Makefile	2004-04-29 16:18:08.000000000 -0700
+++ linux-2.4.19.SuSE/fs/ext3/Makefile	2004-04-29 16:36:09.000000000 -0700
@@ -9,6 +9,8 @@
 
 O_TARGET := ext3.o
 
+export-objs :=	super.o inode.o
+
 obj-y    := balloc.o bitmap.o dir.o file.o fsync.o ialloc.o inode.o \
 		ioctl.o namei.o super.o symlink.o
 obj-m    := $(O_TARGET)
Index: linux-2.4.19.SuSE/fs/ext3/super.c
===================================================================
--- linux-2.4.19.SuSE.orig/fs/ext3/super.c	2004-04-29 16:18:08.000000000 -0700
+++ linux-2.4.19.SuSE/fs/ext3/super.c	2004-04-29 16:36:09.000000000 -0700
@@ -1821,7 +1821,7 @@
 	exit_ext3_xattr();
 }
 
-EXPORT_NO_SYMBOLS;
+EXPORT_SYMBOL(ext3_bread);
 
 MODULE_AUTHOR("Remy Card, Stephen Tweedie, Andrew Morton, Andreas Dilger, Theodore Ts'o and others");
 MODULE_DESCRIPTION("Second Extended Filesystem with journaling extensions");
Index: linux-2.4.19.SuSE/include/linux/fs.h
===================================================================
--- linux-2.4.19.SuSE.orig/include/linux/fs.h	2004-04-29 16:19:41.000000000 -0700
+++ linux-2.4.19.SuSE/include/linux/fs.h	2004-04-29 16:36:52.000000000 -0700
@@ -1174,6 +1174,7 @@
 extern struct vfsmount *kern_mount(struct file_system_type *);
 extern int may_umount(struct vfsmount *);
 extern long do_mount(char *, char *, char *, unsigned long, void *);
+struct vfsmount *do_kern_mount(const char *type, int flags, char *name, void *data);
 extern void umount_tree(struct vfsmount *);
 
 #define kern_umount mntput
Index: linux-2.4.19.SuSE/kernel/ksyms.c
===================================================================
--- linux-2.4.19.SuSE.orig/kernel/ksyms.c	2004-04-29 16:19:35.000000000 -0700
+++ linux-2.4.19.SuSE/kernel/ksyms.c	2004-04-29 16:36:09.000000000 -0700
@@ -330,6 +330,10 @@
 EXPORT_SYMBOL(dcache_readdir);
 EXPORT_SYMBOL(dcache_dir_ops);
 
+/* lustre */
+EXPORT_SYMBOL(pagecache_lock_cacheline);
+EXPORT_SYMBOL(do_kern_mount);
+
 /* for stackable file systems (lofs, wrapfs, cryptfs, etc.) */
 EXPORT_SYMBOL(default_llseek);
 EXPORT_SYMBOL(dentry_open);
