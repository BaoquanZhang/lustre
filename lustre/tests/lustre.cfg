#!/bin/sh

### REMOVE THE FOLLOWING LINES IN ORDER TO TEST LUSTRE WITH THIS CONFIG ###
echo "lustre: edit /etc/lustre/lustre.cfg to enable, exiting" 1>&2
exit 1

# Common configuration options
# Config file for setting up a local OST and MDS server
NETWORK=tcp
LOCALHOST=`hostname`
SERVER=$LOCALHOST
OSTNODE=$LOCALHOST
CLIENTS=*
PORT=988

# Set up the lock manager (required)
SETUP_LDLM=y

#case `echo $LOCALHOST | sed "s/\.[^|]*//"` in
case $LOCALHOST in
$SERVER)
	# Config for setting up a metadata server
	MDSFS=extN
	MDSDEV=/tmp/mds
	MDSSIZE=50000
	SETUP_MDS=y
	;;
esac

case $LOCALHOST in
$OSTNODE)
	# Config for setting up an object storage target with obdfilter
	OSTDEV=/tmp/ost
	OSTSIZE=200000
	OSTFS=extN
	OSTTYPE=obdfilter
	SETUP_OST=y
	;;
esac

case $LOCALHOST in
$CLIENTS)
	# Config for setting up a client filesystem mount
	SETUP_MDC=y
	SETUP_OSC=y
	OSCMT=/mnt/lustre
	SETUP_MOUNT=y
	;;
esac
