<?xml version="1.0"?>
<!DOCTYPE lustre SYSTEM "../utils/lustre.dtd">

<lustre>
  <node name="uml1" uuid="uml1-UUID">
    <network type='tcp' name='net' uuid="uml1-net-UUID" >
      <server>uml1</server>
      <port>666</port>
    </network>
    <profile_ref uuidref="uml1-prof-UUID"/>
  </node>

  <profile name="uml1-prof" uuid="uml1-prof-UUID">
    <service_ref uuidref="uml1-net-UUID"/>
    <service_ref uuidref="ldlm-srv-UUID"/>
    <service_ref uuidref="mds-UUID"/>
  </profile>

  <node name="uml2" uuid="uml2-UUID">
    <network type='tcp' name='net' uuid="uml2-net-UUID" >
      <server>uml2</server>
      <port>666</port>
    </network>
    <profile_ref uuidref="uml2-prof-UUID"/>
  </node>

  <profile name="uml2-prof" uuid="uml2-prof-UUID">
    <service_ref uuidref="uml2-net-UUID"/>
    <service_ref uuidref="ldlm-srv-UUID"/>
    <service_ref uuidref="mdc1-UUID"/>
    <service_ref uuidref="obd1-UUID"/>
    <service_ref uuidref="obd2-UUID"/>
    <service_ref uuidref="ost1-UUID"/>
    <service_ref uuidref="ost2-UUID"/>
  </profile>

  <node name="uml3" uuid="uml3-UUID">
    <network type='tcp' name='net' uuid="uml3-net-UUID" >
      <server>uml3</server>
      <port>666</port>
    </network>
    <profile_ref uuidref="uml3-prof-UUID"/>
  </node>

  <profile name="uml3-prof" uuid="uml3-prof-UUID">
    <service_ref uuidref="uml3-net-UUID"/>
    <service_ref uuidref="ldlm-srv-UUID"/>
    <service_ref uuidref="mdc1-UUID"/>
    <service_ref uuidref="osc1-UUID"/>
    <service_ref uuidref="osc2-UUID"/>
    <service_ref uuidref="mtpt1-UUID"/>
  </profile>

  <ldlm name="ldlm-srv" uuid="ldlm-srv-UUID"/>

  <lov name="lov1" uuid="lov1-UUID">
    <mdc_ref uuidref="mdc1-UUID"/>
    <devices stripesize="65536" pattern="0">
      <osc_ref uuidref="osc1-UUID"/>
      <osc_ref uuidref="osc2-UUID"/>
    </devices>
  </lov>

  <mdc name="mdc1" uuid="mdc1-UUID">
    <network_ref uuidref='uml1-net-UUID'/> <!-- is this extra net needed ?? -->
    <mds_ref uuidref="mds-UUID"/>
  </mdc>

  <mds name="mds" uuid="mds-UUID">
    <network_ref uuidref="uml1-UUID"/>
    <fstype>extN</fstype>
    <device size="50000">/tmp/mds</device>
    <autoformat>yes</autoformat>
  </mds>

  <osc name="osc1" uuid="osc1-UUID">
    <network_ref uuidref='uml2-net-UUID'/>
    <obd_ref uuidref="obd1-UUID"/>
  </osc>

  <osc name="osc2" uuid="osc2-UUID">
    <network_ref uuidref='uml2-net-UUID'/>
    <obd_ref uuidref="obd2-UUID"/>
  </osc>

  <ost name="ost1" uuid="ost1-UUID">
    <network_ref uuidref='uml2-net-UUID'/>
    <obd_ref uuidref='obd1-UUID'/>
  </ost>

  <ost name="ost2" uuid="ost2-UUID">
    <network_ref uuidref='uml2-net-UUID'/>
    <obd_ref uuidref='obd2-UUID'/>
  </ost>

  <obd name="obd1" uuid="obd1-UUID" type="obdfilter">
    <fstype>extN</fstype>
    <device size="100000">/tmp/obd1</device>
    <autoformat>yes</autoformat>
  </obd>

  <obd name="obd2" uuid="obd2-UUID" type="obdfilter">
    <fstype>extN</fstype>
    <device size="100000">/tmp/obd2</device>
    <autoformat>yes</autoformat>
  </obd>

  <mountpoint name="mtpt1" uuid="mtpt1-UUID">
    <path>/mnt/lustre</path>
    <mdc_ref uuidref="mdc1-UUID"/>
    <osc_ref uuidref="osc1-UUID"/>
  </mountpoint>

</lustre>

